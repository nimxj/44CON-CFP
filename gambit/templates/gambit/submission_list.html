{% extends 'gambit/base.html' %}
{% block title %}Submission List - {% endblock %}
{% block styleinject %}{% load static %}<link rel='stylesheet' type='text/css' href='{% static 'datatables.net-bs/css/dataTables.bootstrap.min.css' %}'>
    <link rel='stylesheet' type='text/css' href='{% static 'datatables.net-buttons-bs/css/buttons.bootstrap.min.css' %}'>
    <link rel='stylesheet' type='text/css' href='{% static 'datatables.net-fixedheader-bs/css/fixedHeader.bootstrap.min.css' %}'>
    <link rel='stylesheet' type='text/css' href='{% static 'datatables.net-responsive-bs/css/responsive.bootstrap.min.css' %}'>{% endblock %}
{% block scriptinject %}<script type='text/javascript' charset='utf-8' src='{% static 'datatables.net/js/jquery.dataTables.min.js' %}'></script>
    <script type='text/javascript' charset='utf-8' src='{% static 'datatables.net-bs/js/dataTables.bootstrap.min.js' %}'></script>
    <script type='text/javascript' charset='utf-8' src='{% static 'datatables.net-buttons/js/dataTables.buttons.min.js' %}'></script>
    <script type='text/javascript' charset='utf-8' src='{% static 'datatables.net-buttons/js/buttons.html5.min.js' %}'></script>
    <script type='text/javascript' charset='utf-8' src='{% static 'datatables.net-buttons-bs/js/buttons.bootstrap.min.js' %}'></script>
    <script type='text/javascript' charset='utf-8' src='{% static 'datatables.net-fixedheader/js/dataTables.fixedHeader.min.js' %}'></script>
    <script type='text/javascript' charset='utf-8' src='{% static 'datatables.net-responsive/js/dataTables.responsive.min.js' %}'></script>
    <script type='text/javascript' charset='utf-8' src='{% static 'datatables.net-responsive-bs/js/responsive.bootstrap.min.js' %}'></script>
    <script type='text/javascript' charset='utf-8' src='{% static 'jzip/jzip.js' %}'></script>
    <script type='text/javascript' charset='utf-8' src='{% static 'gambit/dt-init.js' %}'></script>{% endblock %}
{% block content %}<div class='container'>
  <div class='row'>
    <div class='col-md-12'>
      <div class='panel panel-default'>
        <div class='panel-heading'>
          <h3 class='panel-title'><strong>Submission List</strong></h3>
        </div>
        <div class='submissions-table'>
          <table id='submissions' class='table table-striped table-responsive'>
            <thead>
              <th class='col-md-3'>Submission Title</th>
              <th class='col-md-3'>Reviews</th>
              <th class='col-md-3'>Average Score</th>
              <th class='col-md-3'>Submission Date</th>
            </thead>
            <tbody>
              {% for submission in submissions %}{% if user == submission.user %}<tr class='info'>
                <td><a href='{% url 'submission' submission.uuid %}'>{{ submission.title }}</a></td>
                <td>{{ submission.get_reviews|length }}</td>
                <td>{{ submission.get_average_score|default_if_none:0 }}</td>
                <td>{{ submission.submitted_on|date:'Y-m-d' }}</td>
              </tr>{% else %}<tr>
                <td><a href='{% url 'submission' submission.uuid %}'>{{ submission.title }}</a></td>
                <td>{{ submission.get_reviews|length }}</td>
                <td>{{ submission.get_average_score }}</td>
                <td>{{ submission.submitted_on|date:'Y-m-d' }}</td>
              </tr>{% endif %}{% empty %}
              <tr>
                <td colspan='3'>No sumbissions yet!</td>
              </tr>{% endfor %}
            </tbody>
          </table>
        </div>
        <div class='panel-footer'>
          <small>Your own submissions will be highlighted in <span class='bg-info'>blue</span>.</small>
        </div>
      </div>
    </div>
  </div>
</div>{% endblock %}
